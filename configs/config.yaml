# configs/config.yaml  (根配置)
# 全局默认配置 —— 可在运行时用 hydra 覆盖

defaults:
  - _self_
  - callbacks:
      - default
  - logger: null
  - paths: default
  - hydra: default
  # 默认实验（可在命令行用 experiment=... 覆盖）
  - experiment: dmlm/dmlm_base

# 全局模式（保留，可用于 train.py 决定额外逻辑）
mode: crystal   # 可选值: "protein" 或 "crystal"。默认这里设为 crystal

# 默认实验名称（会用于日志目录）
name: dmlm_experiment

# 训练相关默认项
train:
  train: True
  test: True
  debug: false
  force_restart: false
  ckpt_path: last.ckpt
  seed: 42
  lr: 1e-4
  monitor: val/loss   # 用于 checkpoint/earlystop；训练脚本中 metric 名称应一致
  mode: min
  patience: 30
  val_and_save_every_n_steps: null

# Tokenizer / meta 信息（指向 CrystaLLM 的 meta.pkl）
tokenizer:
  type: crystallm
  # 请把 meta.pkl 放到这个位置，或在运行时用 datamodule.meta_file 覆盖
  meta_file: data-bin/crystalmols/meta.pkl
  vocab_size: 371   # 从你上传的 meta.pkl 得到，后续训练 pipeline 可自动覆盖

print_config: True
ignore_warnings: True
seed: 42 # seed for random number generators in pytorch, numpy and python.random
